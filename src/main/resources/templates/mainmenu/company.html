<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대한민국 화장품 제조 기업 시가총액 순위</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>

</head>
<body class="min-h-screen flex flex-col bg-gray-50">

<!-- ✅ Header -->
<div th:replace="~{fragments/basicheader :: basicheader-fragment ('company' , 'company')}"></div>

    <!-- Main Section -->
    <main class="flex-1 max-w-7xl w-full mx-auto px-4 py-8">
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-100 border-b border-gray-200">
                        <tr>
                            <th class="px-6 py-4 text-left text-gray-700">순위</th>
                            <th class="px-6 py-4 text-left text-gray-700">기업명</th>
                            <th class="px-6 py-4 text-right text-gray-700">시가총액</th>
                            <th class="px-6 py-4 text-center text-gray-700">세계순위</th>
                            <th class="px-6 py-4 text-right text-gray-700">현재 주가</th>
                            <th class="px-6 py-4 text-right text-gray-700">전일 대비</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                    <tr th:each="company : ${companies}"
                        class="hover:bg-gray-50 transition-colors">

                        <!-- 순위 -->
                        <td class="px-6 py-4 text-gray-900"
                            th:text="${company.rank_no}">1</td>

                        <!-- 기업명 + 이미지 -->
                        <td class="px-6 py-4 text-gray-900">
                            <div class="flex items-center gap-3">
                                <img
                                        th:src="${company.img}"
                                        th:alt="${company.name}"
                                        class="w-12 h-12 rounded-lg object-cover"
                                />
                                <span th:text="${company.name}">회사명</span>
                            </div>
                        </td>

                        <!-- 시가총액 -->
                        <td class="px-6 py-4 text-right text-gray-900"
                            th:text="${company.mrktTotAmt}">시가총액</td>

                        <!-- 세계순위 -->
                        <td class="px-6 py-4 text-center text-gray-600"
                            th:text="${company.globalrank}">글로벌 순위</td>

                        <!-- 현재 주가 -->
                        <td class="px-6 py-4 text-right text-gray-900"
                            th:text="${company.clpr}">현재 주가</td>

                        <!-- 전일 대비 -->
                        <td class="px-6 py-4 text-right">
                            <div th:with="
                                    trimmed=${#strings.trim(company.vs)},
                                    isZero=${#strings.startsWith(trimmed, '0')
                                            or #strings.startsWith(trimmed, '+0')
                                            or #strings.startsWith(trimmed, '-0')},
                                    isMinus=${#strings.startsWith(trimmed, '-')}
                                 "
                                 th:class="|flex items-center justify-end gap-1 ${isZero ? 'text-gray-500' : (isMinus ? 'text-blue-500' : 'text-red-500')}|">

                                <!-- +일 때만: 상승 아이콘 -->
                                <i th:if="${!isZero and !isMinus}"
                                   data-lucide="trending-up"
                                   class="w-4 h-4"></i>

                                <!-- -일 때만: 하락 아이콘 -->
                                <i th:if="${isMinus}"
                                   data-lucide="trending-down"
                                   class="w-4 h-4"></i>

                                <!-- 전일 대비 텍스트 -->
                                <span th:text="${company.vs}">
                                    전일 등락 비율
                                </span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
            <p class="text-gray-700">
                <span class="text-gray-900">* 안내:</span> 본 데이터는 예시 데이터입니다. 
                실시간 데이터를 표시하려면 증권 API와 연동이 필요합니다.
            </p>
        </div>
    </main>

<!-- ✅ Footer -->
<div th:replace="~{fragments/footer :: footer-fragment ('company')}"></div>

<!-- Initialize Lucide Icons -->
<script>
    lucide.createIcons();
</script>
</body>
</html>
